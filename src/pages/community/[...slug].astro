---
import Hero from "@/src/components/Hero.astro";
import Section from "@components/Section.astro";
import Layout from "@layouts/Layout.astro";
import { getCollection, render } from "astro:content";

export async function getStaticPaths() {
  const posts = await getCollection("community");
  return posts.map((post) => ({
    params: { slug: post.data.slug.replace("community/", "") },
    props: { entry: post },
  }));
}

const { entry } = Astro.props;
const { Content } = await render(entry);

const COMMUNITY = {
  layout: {
    title: "Community - AI Code Academy",
    description: "Comunidad de desarrolladores de AI Code Academy",
  },
  hero: {
    title: entry.data.title,
    subtitle: entry.data.subtitle || "Comunidad de AI-Driven Development",
    cta: {
      link:
        entry.data.cta?.link || "https://www.linkedin.com/in/albertobasalo/",
      text: entry.data.cta?.text || "Únete a la comunidad",
    },
  },
};

const cta = {
  title: "¿Quieres organizar un meetup o contribuir?",
  subtitle: "Presencial o virtual, difunde la IA en tu comunidad",
  cta: {
    link: "https://www.linkedin.com/in/albertobasalo/",
    text: "Contacta con Alberto Basalo",
  },
};
---

<Layout layout={COMMUNITY.layout}>
  <article>
    <header>
      <Hero hero={COMMUNITY.hero} />
    </header>
    <main class="colored-headers">
      <Content />
    </main>
    <footer>
      <Section section={cta} />
    </footer>
  </article>
</Layout>
